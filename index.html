<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Autenticación</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }

    .form-container {
      width: 300px;
      margin: 40px auto;
      padding: 20px;
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    .form-container h2 {
      margin-bottom: 20px;
      font-size: 1.5em;
      text-align: center;
    }

    .form-container input[type="text"],
    .form-container input[type="password"],
    .form-container input[type="email"] {
      width: 100%;
      padding: 12px 15px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .form-container button {
      background-color: #4CAF50;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s;
    }

    .form-container button:hover {
      background-color: #45a049;
    }

    /* Estilos del contenedor oculto */
    #registerForm, #loginForm {
      display: none;
    }

  </style>
</head>
<body>

  <!-- Formulario de inicio de sesión -->
  <div id="loginForm" class="form-container">
    <h2>Iniciar sesión</h2>
    <input type="email" placeholder="Email" id="loginEmail">
    <input type="password" placeholder="Contraseña" id="loginPassword">
    <button onclick="login()">Iniciar sesión</button>
    <button onclick="redirectToRegister()">Registrarse</button>
    <button onclick="signInWithGoogle()">Iniciar sesión con Google</button>
  </div>

  <!-- Formulario de registro -->
  <div id="registerForm" class="form-container">
    <h2>Registrarse</h2>
    <input type="text" placeholder="Nombre" id="registerName">
    <input type="email" placeholder="Email" id="registerEmail">
    <input type="password" placeholder="Contraseña" id="registerPassword">
    <button onclick="register()">Registrarse</button>
    <button onclick="redirectToLogin()">Volver al inicio de sesión</button>
  </div>

  <!-- Importar Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    // Configuración de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD7ztKPXGp5LlerfjCBfrTbcbaGxZPj_ms",
      authDomain: "futbol-d291c.firebaseapp.com",
      projectId: "futbol-d291c",
      storageBucket: "futbol-d291c.appspot.com",
      messagingSenderId: "869817814537",
      appId: "1:869817814537:android:384efb4537fa2e1e7032d8"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Función para iniciar sesión
    function login() {
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;

      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          window.location.href = "index.html"; // Redirigir a la página principal
        })
        .catch((error) => {
          alert("Error al iniciar sesión: " + error.message);
        });
    }

    // Función para registrarse
    function register() {
      const name = document.getElementById("registerName").value;
      const email = document.getElementById("registerEmail").value;
      const password = document.getElementById("registerPassword").value;

      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          user.updateProfile({
            displayName: name
          }).then(() => {
            window.location.href = "index.html"; // Redirigir a la página principal
          }).catch((error) => {
            alert("Error al actualizar el nombre: " + error.message);
          });
        })
        .catch((error) => {
          alert("Error al registrarse: " + error.message);
        });
    }

    // Función para iniciar sesión con Google
    function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();

      auth.signInWithPopup(provider)
        .then(() => {
          window.location.href = "index.html"; // Redirigir a la página principal
        })
        .catch((error) => {
          alert("Error al iniciar sesión con Google: " + error.message);
        });
    }

    // Función para redirigir al formulario de registro
    function redirectToRegister() {
      document.getElementById("loginForm").style.display = "none";
      document.getElementById("registerForm").style.display = "block";
    }

    // Función para redirigir al formulario de inicio de sesión
    function redirectToLogin() {
      document.getElementById("registerForm").style.display = "none";
      document.getElementById("loginForm").style.display = "block";
    }

    // Mostrar el formulario adecuado según la URL
    window.onload = function() {
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);

      if (urlParams.get('action') === 'register') {
        redirectToRegister();
      } else {
        redirectToLogin();
      }
    }
  </script>

</body>
    </html>
